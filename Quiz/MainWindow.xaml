<Window x:Class="Quiz.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Quiz"
        xmlns:vm="clr-namespace:Quiz.ViewModel"
        xmlns:vw="clr-namespace:Quiz.View"
        mc:Ignorable="d"
        Title="Quiz - Ekran powitalny" Height="450" Width="800"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <DataTemplate DataType="{x:Type vm:QuizGeneratorViewModel}">
            <vw:QuizGeneratorView />
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <!-- Główne menu -->
        <Grid x:Name="MainMenuGrid" Visibility="Visible">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <!-- Tytuł -->
                <TextBlock Text="Witaj w quizie!" FontSize="36" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,40"/>

                <!-- Przyciski opcji -->
                <Button Content="Zagraj" Width="200" Height="45" Margin="0,10,0,10" FontSize="18" Click="PlayButton_Click"/>
                <Button Content="Stwórz quiz" Width="200" Height="45" Margin="0,10,0,10" FontSize="18"/>
                <Button Content="Informacje" Width="200" Height="45" Margin="0,10,0,10" FontSize="18" Click="InfoButton_Click"/>
                <Button Content="Wyjdź" Width="200" Height="45" Margin="0,10,0,10" FontSize="18" Click="ExitButton_Click"/>
            </StackPanel>
        </Grid>

        <!-- Ekran informacji -->
        <Grid x:Name="InfoGrid" Visibility="Collapsed">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Width="600">
                <TextBlock Text="Informacje o autorach" FontSize="30" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,30"/>

                <Border Background="#F0F0F0" CornerRadius="10" Padding="20" Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Autorzy aplikacji:" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,15"/>
                        <TextBlock Text="Jan Kowalski - Programista" FontSize="16" Margin="0,5,0,5"/>
                        <TextBlock Text="Anna Nowak - Projektant UI" FontSize="16" Margin="0,5,0,5"/>
                        <TextBlock Text="Tomasz Wiśniewski - Baza pytań" FontSize="16" Margin="0,5,0,5"/>
                        <TextBlock TextWrapping="Wrap" Margin="0,20,0,0" FontSize="14">
                            Quiz App to aplikacja stworzona w ramach projektu zaliczeniowego. 
                            Aplikacja umożliwia rozwiązywanie quizów oraz tworzenie własnych zestawów pytań.
                            Projekt został zrealizowany w technologii WPF przy użyciu języka C# oraz XAML.
                        </TextBlock>
                    </StackPanel>
                </Border>

                <Button Content="Powrót do menu głównego" Width="250" Height="40" Margin="0,20,0,0" FontSize="16" Click="BackToMainButton_Click"/>
            </StackPanel>
        </Grid>

        <!-- Ekran wczytywania quizu -->
        <Grid x:Name="LoadQuizGrid" Visibility="Collapsed">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Width="600">
                <TextBlock Text="Wczytaj quiz" FontSize="30" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,30"/>

                <Border Background="#F0F0F0" CornerRadius="10" Padding="20" Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Wybierz plik z quizem:" FontSize="18" Margin="0,0,0,15"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBox x:Name="QuizFilePathTextBox" FontSize="16" Padding="5" IsReadOnly="True" Margin="0,0,10,0"/>
                            <Button Grid.Column="1" Content="Przeglądaj..." Width="100" Height="30" Click="BrowseButton_Click"/>
                        </Grid>

                        <TextBlock x:Name="QuizInfoTextBlock" Margin="0,15,0,0" FontSize="16" TextWrapping="Wrap" Visibility="Collapsed"/>
                    </StackPanel>
                </Border>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                    <Button x:Name="StartQuizButton" Content="Rozpocznij" Width="150" Height="40" FontSize="16" Margin="0,0,20,0" IsEnabled="False" Click="StartQuizButton_Click"/>
                    <Button Content="Anuluj" Width="150" Height="40" FontSize="16" Click="CancelLoadQuizButton_Click"/>
                </StackPanel>
            </StackPanel>
        </Grid>

        <!-- Ekran pytania -->
        <Grid x:Name="QuizQuestionGrid" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Nagłówek z timerem -->
            <Grid Grid.Row="0" Background="#F0F0F0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="QuestionNumberTextBlock" Text="Pytanie 1/10" FontSize="18" FontWeight="SemiBold" Margin="20,15"/>

                <Border Grid.Column="1" Background="#FFFFFF" CornerRadius="5" Margin="10" Padding="10,5">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Czas: " FontSize="16" VerticalAlignment="Center"/>
                        <TextBlock x:Name="TimerTextBlock" Text="30" FontSize="16" FontWeight="Bold" VerticalAlignment="Center"/>
                        <TextBlock Text=" sek." FontSize="16" VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Treść pytania i odpowiedzi -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="30">
                    <TextBlock x:Name="QuestionTextBlock" FontSize="20" TextWrapping="Wrap" Margin="0,0,0,30"/>

                    <ItemsControl x:Name="AnswersItemsControl">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <CheckBox Margin="0,5,0,5" Content="{Binding Text}" FontSize="16" IsChecked="{Binding IsSelected, Mode=TwoWay}"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </ScrollViewer>

            <!-- Przyciski nawigacji -->
            <Grid Grid.Row="2" Background="#F0F0F0">
                <Button Content="Następne pytanie" Width="180" Height="40" FontSize="16" HorizontalAlignment="Right" Margin="20" Click="NextQuestionButton_Click"/>
            </Grid>
        </Grid>

        <!-- Ekran podsumowania -->
        <Grid x:Name="QuizSummaryGrid" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Nagłówek -->
            <TextBlock Grid.Row="0" Text="Podsumowanie quizu" FontSize="30" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,20,0,0"/>

            <!-- Wynik -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="30">
                <StackPanel>
                    <Border Background="#F0F0F0" CornerRadius="10" Padding="20" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Twój wynik:" FontSize="24" FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <TextBlock x:Name="ScoreTextBlock" Text="0" FontSize="48" FontWeight="Bold" Foreground="#3F7FBF"/>
                                <TextBlock x:Name="MaxScoreTextBlock" Text="/10" FontSize="24" VerticalAlignment="Bottom" Margin="5,0,0,10"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <TextBlock Text="Przegląd pytań i odpowiedzi:" FontSize="20" FontWeight="SemiBold" Margin="0,10,0,20"/>

                    <ItemsControl x:Name="SummaryItemsControl">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#F8F8F8" BorderBrush="#DDDDDD" BorderThickness="1" CornerRadius="5" Margin="0,0,0,15" Padding="15">
                                    <StackPanel>
                                        <TextBlock Text="{Binding QuestionText}" FontSize="18" FontWeight="SemiBold" TextWrapping="Wrap" Margin="0,0,0,10"/>

                                        <ItemsControl ItemsSource="{Binding Answers}">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid Margin="0,3,0,3">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <TextBlock Grid.Column="0" Text="{Binding Status}" FontWeight="Bold" FontSize="16" Margin="0,0,10,0" 
                                                                   Foreground="{Binding StatusColor}"/>
                                                        <TextBlock Grid.Column="1" Text="{Binding Text}" FontSize="16" TextWrapping="Wrap"/>
                                                    </Grid>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>

                                        <TextBlock Text="{Binding PointsInfo}" FontSize="16" FontWeight="SemiBold" Margin="0,10,0,0" 
                                                   Foreground="{Binding PointsColor}"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </ScrollViewer>

            <!-- Przycisk powrotu -->
            <Button Grid.Row="2" Content="Powrót do menu głównego" Width="250" Height="40" FontSize="16" HorizontalAlignment="Center" 
                    Margin="0,10,0,20" Click="BackToMainFromSummaryButton_Click"/>
        </Grid>

        <!-- Stopka -->
        <TextBlock Text="© 2025 Quiz App" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,10" Opacity="0.7"/>
    </Grid>
</Window>